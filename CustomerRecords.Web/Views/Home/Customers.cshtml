@model CustomerRecords.Entity.Common

@{
    ViewBag.Title = "Customers";
}


<div class="panel panel-primary">

    <div class="panel-heading"><h3>Customers</h3></div>
    <div class="panel-footer">
        <div class="row">
            <div class="col-md-9">
                <div class="input-group">
                    <span class="input-group-addon" id="basic-addon1">Sort By:</span>
                    @*@Html.DropDownListFor(m => m.SelectedCountry, new SelectList(Model.Countries, "Id", "Name"), new { id = "ddlCountry", @class = "form-control", @onChange = "OnChangeCountry()" })
                    @ViewBag.Selected*@
                   
                    @Html.DropDownList("Country", new SelectList(Model.Countries, "Id", "Name", ViewBag.SelectedCountryId), new { id = "ddlCountry", @class = "form-control", @onChange = "OnChangeCountry()" })
                </div>
            </div>
            <div class="col-md-3 text-right">
                <button onclick="location.href='@Url.Action("Create", "Home",new { id = ""})';return false;" class="btn btn-success">Create</button>
            </div>
        </div>
    </div>
    <div class="panel-body">
        

        <table class="table table-sm table-striped">
            <thead>
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Contact</th>
                    <th scope="col">Address</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Customers)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Id)<br />
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.FirstName)<br />
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LastName)<br />
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Email)<br />
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ContactNo)<br />
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Address)<br />
                        </td>
                        <td>
                        <td>
                            @Html.ActionLink("View", "Details", new { id = item.Id })
                            @*<button onclick="location.href='@Url.Action("Delete", "Home", new { id = item.Id })';return false;">Delete</button>*@
                        </td>
                    </tr>
                }
            </tbody>
        </table>

    </div>

</div>




<script>
    function OnChangeCountry() {
        var countryName = $('#ddlCountry :selected').text();
        window.location.href = "/Home/FillterRecords?countryName=" + countryName;
}
</script>